graph TB
    subgraph "Main System Architecture"
        SIM[Simulator - Main Controller]
        PM[Process Manager]
        RM[Resource Manager]
        SCH[Scheduler/Ordonnanceur]
        EQ[Execution Queue]
        
        SIM --> PM
        SIM --> RM
        SIM --> SCH
        SCH --> EQ
    end
    
    subgraph "Process Manager Components"
        PT[Process Table]
        RQ[Ready Queue]
        BQ[Blocked Queue]
        CSV[CSV Parser]
        
        PM --> PT
        PM --> RQ
        PM --> BQ
        PM --> CSV
        
        PT --> PCB1[PCB]
        PCB1 --> PCB2[PCB]
        PCB2 --> PCB3[PCB...]
        
        RQ --> RQ_PCB1[PCB - Ready]
        RQ_PCB1 --> RQ_PCB2[PCB - Ready]
        
        BQ --> BQ_PCB1[PCB - Blocked]
        BQ_PCB1 --> BQ_PCB2[PCB - Blocked]
    end
    
    subgraph "Resource Manager Components"
        RL[Resource List]
        RM --> RL
        
        RL --> RES1[AAA]
        RL --> RES2[BBB]
        RL --> RES3[CCC]
        RES1 --> RES4[DDD]
        RES2 --> RES5[EEE]
        RES3 --> RES6[FFF]
    end
    
    subgraph "PCB Structure"
        PCB[Process Control Block]
        PCB --> PS[Process Statistics]
        PCB --> INST_CHAIN[Instruction Chain]
        
        INST_CHAIN --> INST1[INSTRUCTION 1]
        INST1 --> INST2[INSTRUCTION 2]
        INST2 --> INST3[INSTRUCTION ...]
        
        PS --> STATS[tournround, temps_attente,<br>temps_arrive, temps_fin,<br>temps_creation]
    end
    
    subgraph "Scheduler Components"
        SS[Scheduler Statistics]
        SCH --> SS
        
        SS --> SCH_STATS[cpu_total_temps_usage,<br>cpu_temps_unoccuped,<br>context_switch,<br>total_temps_attente,<br>total_turnround,<br>processus_termine_count,<br>troughtput]
    end
    
    subgraph "Algorithms"
        ALGO[Algorithms]
        ALGO --> RR[Round Robin]
        ALGO --> SRTF[Shortest Remaining Time First]
        ALGO --> PPP[Priority Preemptive]
        ALGO --> FCFS[First Come First Serve]
        ALGO --> SJF[Shortest Job First]
    end
    
    subgraph "File Structure"
        FS[Source Files]
        FS --> process.h
        FS --> process_manager.h
        FS --> schedular.h
        FS --> simulator.h
        FS --> ressource.h
        FS --> ressource_manager.h
        FS --> execution_queue.h
        FS --> difference_time.h
    end
    
    %% Data Flow Relationships
    SIM -- "start()<br>load_processus()<br>run_simulator()" --> PM
    SIM -- "start_ressource_manager()<br>check_ressource_disponibility()<br>signal_ressource_free()" --> RM
    SIM -- "start_schedular()<br>ask_sort_rt()<br>ask_sort_priority()" --> SCH
    
    PM -- "create_process_table()<br>create_ready_queue()<br>create_blocked_queue()" --> PT
    PM -- "sort_by_fc()<br>sort_by_rt()<br>sort_by_priority()<br>sort_by_burst()" --> RQ
    PM -- "add_process_to_blocked_queue()<br>delete_from_blocked_queue()" --> BQ
    
    RM -- "create_ressource_list()<br>mark_ressource_available()<br>mark_ressource_unavailable()<br>check_if_ressource_available()" --> RL
    
    SCH -- "execute_process()<br>signal_execute_instruction()" --> EQ
    SCH -- "create_statistics()<br>update_schedular_statistics()" --> SS
    SCH -- "need_ressources()<br>ressource_is_free()<br>update_cpu_time_used()" --> RM
    SCH -- "ask_for_next_ready_element()<br>update_process()" --> PM
    
    EQ -- "execute_instruction()<br>check_ressource_disponibility()" --> INST_CHAIN
    EQ -- "need_ressources" --> SCH
    
    CSV -- "parser_func()<br>instruction_parser()<br>extract_from_buffer()" --> PCB
    
    %% Process State Transitions
    subgraph "Process State Flow"
        NEW[New Process] -- "parse CSV" --> READY[Ready]
        READY -- "scheduler selects" --> EXEC[Executing]
        EXEC -- "quantum expires/needs resource" --> BLOCKED[Blocked]
        EXEC -- "all instructions complete" --> TERM[Terminated]
        BLOCKED -- "resource available" --> READY
        EXEC -- "preempted (SRTF/PPP)" --> READY
    end
    
    %% Key Function Pointers
    subgraph "Function Pointer Assignments"
        FP[Function Pointers]
        
        PM_FP[Process Manager Functions]
        PM_FP --> create_process_table
        PM_FP --> create_ready_queue
        PM_FP --> sort_by_rt
        PM_FP --> sort_by_priority
        PM_FP --> get_next_ready_element
        
        PCB_FP[PCB Operations]
        PCB_FP --> update_temps_attente
        PCB_FP --> mark_instruction_terminated
        PCB_FP --> update_temps_arrive
        PCB_FP --> update_temps_fin
        PCB_FP --> define_next
        
        SCH_FP[Scheduler Functions]
        SCH_FP --> signal_execute_instruction
        SCH_FP --> need_ressources
        SCH_FP --> update_cpu_time_used
        SCH_FP --> execute_process
    end
    
    %% Connections between components
    RQ -- "next ready process" --> SCH
    BQ -- "blocked processes" --> PM
    RL -- "resource status" --> RM
    EQ -- "instruction execution" --> INST_CHAIN
    
    %% Styling
    classDef controller fill:#e1f5fe,stroke:#01579b
    classDef manager fill:#f3e5f5,stroke:#4a148c
    classDef queue fill:#e8f5e8,stroke:#1b5e20
    classDef struct fill:#fff3e0,stroke:#e65100
    classDef resource fill:#fce4ec,stroke:#880e4f
    classDef file fill:#f5f5f5,stroke:#616161
    classDef algo fill:#e8eaf6,stroke:#283593
    classDef state fill:#e0f2f1,stroke:#004d40
    
    class SIM,SCH controller
    class PM,RM manager
    class RQ,BQ queue
    class PCB,PT,SS,INST_CHAIN struct
    class RL,RES1,RES2,RES3,RES4,RES5,RES6 resource
    class process.h,process_manager.h,schedular.h,simulator.h,ressource.h,ressource_manager.h,execution_queue.h,difference_time.h file
    class ALGO,RR,SRTF,PPP,FCFS,SJF algo
    class NEW,READY,EXEC,BLOCKED,TERM state